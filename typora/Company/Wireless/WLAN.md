[TOC]



# 1.概念

​		WLAN = Wireless Local Area Network = 无线局域网  
​		WIFI 营销术语，无线局域网的代名词   		  
​		协议：802.11 (第一块里程碑/1997.6) 802.11b（统一无线网络标准）

## 1.1 名词认识

​		无线局域网：应用无线通信技术将无线终端设备互联起来构成可相互通信和实现资源共享的网络体系。  
​		AP:  Access Point = 接入点，表示无线局域网的揭露点，类似以太网中的交换机。  
​		AC: Access Control = 无线控制器。  
​		STA: station = 无线终端设备。  
​		SSID：Service-set Identifier = 无线名称  

## 1.2. 无线网络频段（Band）

​		无线电 = 射频 = 在自由空间（空气/真空）传播的电磁波。（波长长于红外线）  
​		单频（Single Band）AP, 仅工作在2.4G频段。  
​		双频（Dual Band）AP，可工作在2.4G和5G两个频段。

| 频段 |                             2.4G                             |                              5G                              |
| ---- | :----------------------------------------------------------: | :----------------------------------------------------------: |
| 优点 | 2.4G信号频率低，在空间或障碍物中传播时衰减较小，传播的距离更远。 | 5G信号频宽较宽，无线环境比较干净，干扰少，网速稳定，且5G可支持更高的无线速率。 |
| 缺点 | 2.4G信号频宽较窄，家电、无线设备大多使用2.4频段，无线环境更加拥挤，干扰较大。 | 5G信号频率较高，在空气或障碍物中传播时衰减较大，覆盖距离一般比2.4G信号小 |

## 1.3. 无线信道（Channel）

​		WLAN在频段的基础上划分了相应的信道（WLAN Channel）,就像不同车流在不同车道行驶。  
​		（1）2.4GHz  
​				3个不重叠的信道：1 ，6，11。  
​		（2）5GHz  
​				13个不重叠的信道（中国大陆）：36 ，40，44，48，52，56，60，64，149，153，157，161，165。

PS:  
		不同国家的信道数量开放程度不一样，上面列举的是中国大陆。

## 1.4. 国家码（Country Code）

​		为规避工作在接近频段的雷达系统，各个国家/地区的无线电法规定可用信道有差异。  
​		故用国家码来标识AP射频所在的国家，不同国家规定了不同的AP射频特性，包括AP的发送功率，支持的信道等。  
​		目的：使AP的射频特性符合不同国家或区域的法律法规要求。  

## 1.5. 无线网络协议	

​		每一代升级都伴随着频段、算法、编码、空间流等技术的升级。

![image-20230302145445896](C:\Users\acer\AppData\Roaming\Typora\typora-user-images\image-20230302145445896.png)

## 1.6. MIMO与空间流

​		MIMO = Multiple In Multiple Out   
​		空间流 = Spatial Stream  
​		![image-20230302145915717](C:\Users\acer\AppData\Roaming\Typora\typora-user-images\image-20230302145915717.png)

​		1条流单倍速率，2条流双倍速率，3条流三倍速率。  
​		MIMO中，2x2 代表2条流，3x3代表3 条流。

## 1.7. 吞吐

​		最大理论吞吐（Max Throughput）.  
​		双频AP整机最大吞吐 = 2.4G吞吐 + 5G吞吐，如：  
​			2.13Gbps = 0.4Gbps + 1.73Gbps  
​		实际吞吐 = 理论吞吐的60~70%

## 1.8. 天线增益，发射功率，信号强度

​		（1）天线被用来转换成空中的电磁波，在转换过程中还可以对发射和接收的信号进行放大，放大能力就叫**天线增益**(Antenna Gain)，单位为**dBi**。  
​		（2）**发射功率**(Tx Power)是指AP射频模块发出的原始信号的强度，一般单位为**dBm或者mW**。   
​		（3）可以通过Wi-Fi信号格数，或者读出**-dBm**数值查看**信号强度**.

​		能够保证高质量通信的信号强度一般要求优于-67dBm，最低可保障通信的信号强度多推荐为-75dBm。

## 1.9. 漫游

​		由于单个AP的信号覆盖范围都是有限，移动终端会出现从一个AP覆盖范围跨越到另一个AP覆盖范围的情况。为了避免切换时网络通讯中断的情况，就用到无线漫游。

​		**L2漫游**的条件保证信号的不间断，同SSID/同VLAN。  
​		**L3漫游**就需要AP之间的协同才能完成，同SSID/换VLAN。

# 2. 接入过程

![image-20230302152014292](C:\Users\acer\AppData\Roaming\Typora\typora-user-images\image-20230302152014292.png)

## 2.1. 扫描阶段

​		802.11MAC (STA)使用扫描功能来完成网络发现，  
​		有以下两种形式:  
​				→寻找和加入一个网络
。  
​				→当STA漫游时寻找一个新的AP    
​		STA可以根据不同的应用场景选择不同扫描形式。  
​		扫描形式分为:主动扫描、被动扫描。 

### 2.1.1 主动扫描

**（1）概念**

​		主动扫描是指STA主动去探测搜索无线网络。更具体一点说，STA会主动在其所支持的信道上依次发送探测信号，用于探测周围存在的无线网络，STA发送的探测信号称为探测请求帧(Probe Request, subtype=Ox0100）。  
​		探测请求帧又可以分为两类，一类是未指定任何SSID,一类是指定了SSID的。

**（2）过程**

​		(a）STA会在其能够访问到的信道轮流发送Probe Request帧。设定ProbeDelay计时器，用以控制STA等待检测帧的最长时间如果在某个信道能够检测到帧，那么证明这个信道有人使用，可以进行探测，如果没有，便等到计时器过时再调至下一信道检测;  
​		(b）取得媒体访问控制权，主动发出Probe Request帧;AP间也需要通过竞争窗口取得媒介控制权来回复probe Response帧。  
​		(c) STA在AP的覆盖范围内;

### 2.1.2. 被动扫描 

**（1）概念**

​		被动扫描则是指STA只会被动的接收AP发送的beacon帧(subtype=0x1000)

**（2）注意点**

​		(a）依赖AP的广播周期（默认100ms)  
​		(b）隐藏的AP信号无法直接识别出来;  
​		(c)   STA必须在AP信号的覆盖范围;  
​		等等。

## 2.2. 认证阶段

![image-20230302153505239](C:\Users\acer\AppData\Roaming\Typora\typora-user-images\image-20230302153505239.png)

![image-20230302153518873](C:\Users\acer\AppData\Roaming\Typora\typora-user-images\image-20230302153518873.png)

​		链路认证:Open-system和Shared-key Authentication两种方式.

### 2.2.1. 开放身份认证(Open-system)

​		开放身份认证--等同于没有认证。只要STA发送认证请求，AP均通过认证。  
​		认证报文包括: auth request和auth response帧;

![image-20230302153822755](C:\Users\acer\AppData\Roaming\Typora\typora-user-images\image-20230302153822755.png)

![image-20230302153925620](C:\Users\acer\AppData\Roaming\Typora\typora-user-images\image-20230302153925620.png)

### 2.2.2.Shared-key Authentication

## 2.3.关联阶段

​		关联报文包括: assoc request和assoc response帧;

​		Assoc帧中包含了协商的重要信息，如HT CAP、VHT CAP、EXT CAP、AID、四地址能力等。还包含本次关联的ssid等字段。

​		重关联对STA的移动性提供支持，使得STA可以在同一个ESS中从一个AP相关联转移到另外一个。

​		一般来说，STA在漫游过程通过检测信号强度或网络质量来选择需要加入的新AP;
